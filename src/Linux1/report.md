## Part 1. Установка ОС
**== Задание ==**
##### Установить **Ubuntu 20.04 Server LTS** без графического интерфейса. (Используем программу для виртуализации - VirtualBox)

- Отсутствие графического интерфейса:

![Консоль Ubuntu](screen/screen0.png "Отсутствие графического интерфейса")

- Результат выполнения команды: `cat /etc/issue`, чтоб узнать версию Ubuntu:

![Версия Ununtu](screen/screen1.png "Результат выполнения команды: `cat /etc/issue.`")


## Part 2. Создание пользователя
**== Задание ==**
##### Создать пользователя, отличного от пользователя, который создавался при установке. Пользователь должен быть добавлен в группу `adm`.

- Создание нового пользователя `admin` командой `sudo adduser admin`:

![Создание нового пользователя](screen/screen2.png "Создание пользователя `admin`")

- Добавление нового пользователя `admin` в группу `adm` командой `sudo usermod -aG adm admin`:

![Добавление пользователя](screen/screen_a.png "Добавление пользователя `ebonicra_test` в группу `adm`")

- Отображение нового пользователя (admin) с помощью команды `cat /etc/passwd`:

![Отображение нового поьзователя](screen/screen3.png "Результат выполнения команды: `cat /etc/passwd`")


## Part 3. Настройка сети ОС
**== Задание ==**
##### Задать название машины вида user-1  

- с помощью команды `sudo nano /etc/hostname` В открывшемся редакторе нужно заменить текущее имя на `user-1`:

##### Установить временную зону, соответствующую вашему текущему местоположению.  

-  командой `timedatectl set-timezone Asia/Novosibirsk` ставим временную зону Новосиба:

![Data and time](screen/screen5.png "Отображение времени и региона")

##### Вывести названия сетевых интерфейсов с помощью консольной команды.

- Вывод на экран названий сетевых интерфейсов с помощью команды `ifconfig -a`:

![Сетевые интерфейсы](screen/screen4.png "Отображение названия сетевых интерфейсов")

> Эта команда показывает информацию о всех сетевых интерфейсах, включая интерфейс lo. Интерфейс lo (loopback) является виртуальным интерфейсом, который используется для обращения к устройству с помощью адреса 127.0.0.1. Он часто используется для тестирования сетевых приложений, а также для проверки работоспособности сетевых соединений.

##### Используя консольную команду получить ip адрес устройства, на котором вы работаете, от DHCP сервера.

- Получение ip адреса устройства командой `ip address show`:

![ip адрес](screen/screen6.png)

> DHCP (Dynamic Host Configuration Protocol) - это протокол, используемый для автоматической настройки IP-адресов и других сетевых параметров для устройств в сети.

##### Определить и вывести на экран внешний ip-адрес шлюза (ip) и внутренний IP-адрес шлюза, он же ip-адрес по умолчанию (gw). 

- Получение внешнего ip-адреса шлюза командой `curl ifconfig.me` и получение внутреннего IP-адрес шлюза командой `ip route get 8.8.8.8 | awk '{print $3}'`:

![Внутренний и внешний IP-адрес шлюза](screen/screen7.png)

##### Задать статичные (заданные вручную, а не полученные от DHCP сервера) настройки ip, gw, dns (использовать публичный DNS серверы, например 1.1.1.1 или 8.8.8.8).
##### Перезагрузить виртуальную машину. Убедиться, что статичные сетевые настройки (ip, gw, dns) соответствуют заданным в предыдущем пункте.  

- Чтобы задать статичные сетевые настройки, нужно выполнить `sudo nano /etc/netplan/01-netcfg.yaml`
- Поменять значение параметра `dhcp4: true` на `dhcp4: no`, чтобы отключить протокол DHCP
- Добавить параметр `addresses:` в котором прописываю статический IP: `10.0.2.15`
- Добавить параметр `nameservers:` в котором прописать публичный DNS сервер `1.1.1.1`.
- Перезагружаем вм командой `reboot` и снова проверяем `sudo nano /etc/netplan/00-installer-config.yaml` чтобы настройки остались.

- Пинг хоста `1.1.1.1` командой `ping 1.1.1.1`
- Пинг хоста `ya.ru` командой `ping ya.ru`
![Пинг удаленных хостов](screen/screen_ping.png)
![Пинг удаленных хостов](screen/screen_b.png)

## Part 4. Обновление ОС
**== Задание ==**
##### Обновить системные пакеты до последней на момент выполнения задания версии.  

- Обновлений больше нет:
 ![Обнавление системных пакетов](screen/screen10.png)

 ## Part 5. Использование команды **sudo**
**== Задание ==**
##### Разрешить пользователю, созданному в задании 2, выполнять команду sudo.

> sudo позволяет выполнять команды от имени другого пользователя, например, от имени root, обладающего полным контролем над системой. Это позволяет предотвратить ошибки в процессе работы с системой и повысить безопасность, так как у пользователя нет постоянных прав суперпользователя. Кроме того, sudo позволяет выполнять команды с привилегиями суперпользователя без необходимости переключаться на учетную запись root, что может сэкономить время и повысить удобство использования системы..

- Используем команду `sudo visudo` и находим строку, начинающуюся с %sudo и добавляем после нее имя `admin`:

 ![Разрешение выполнять команду sudo](screen/screen11.png)

- Теперь пользователь `admin` может выполнять команды с привилегиями суперпользователя, используя команду sudo.:
- А теперь изменим hostname os используем команду `sudo nano /etc/hostname`:

![Смена hostname ОС](screen/screen_os.png)

- Меняем hostname:

![Смена hostname ОС часть 2](screen/screen_os2.png)

## Part 6. Установка и настройка службы времени
**== Задание ==**
##### Настроить службу автоматической синхронизации времени.

- Для настройки службы авто-синхронизации времени:
    - Установка пакета `sudo apt install systemd-timesyncd`
    - Установка значения `sudo timedatectl set-ntp true`

- Вывод команды `timedatectl show` содержит **NTPSynchronized=yes**:

  ![Вывод времени, часового пояса](screen/screen13.png)


## Part 7. Установка и использование текстовых редакторов 
**== Задание ==**
##### Установить текстовые редакторы **VIM** (+ любые два по желанию **NANO**, **MCEDIT**, **JOE** и т.д.)  

![INSTALL](screen/screen14.png)

##### Используя каждый из трех выбранных редакторов, создайте файл *test_X.txt*, где X -- название редактора, в котором создан файл. Напишите в нём свой никнейм, закройте файл с сохранением изменений. 

- VIM: `vim test_vim.txt` - для открытия, `esc` and `:wq` - для сохранения и выхода.
- NANO: `nano test_nano.txt` - для открытия, `ctrl + X` and `Y` - для сохранения и выхода.
- JOE: `JOE test_joe.txt` - для открытия, `ctrl + K` and `X` and `y` - для сохранения и выхода.

![VIM](screen/screen15.png)
![NANO](screen/screen16.png)
![JOE](screen/screen17.png)

##### Используя каждый из трех выбранных редакторов, откройте файл на редактирование, отредактируйте файл, заменив никнейм на строку "21 School 21", закройте файл без сохранения изменений.

- VIM: `vim test_vim.txt` - для открытия, `esc` and `:q!` - для выхода без сохранения.
- NANO: `nano test_nano.txt` - для открытия, `ctrl + X` and `N` - для выхода без сохранения.
- JOE: `JOE test_joe.txt` - для открытия, `ctrl + K` and `X` and `n` - для выхода без сохранения.

![VIM](screen/screen18.png)
![NANO](screen/screen19.png)
![JOE](screen/screen21.png)

##### Используя каждый из трех выбранных редакторов, отредактируйте файл ещё раз (по аналогии с предыдущим пунктом), а затем освойте функции поиска по содержимому файла (слово) и замены слова на любое другое.

- VIM:`:%s/sleepyka/School/g` - для замены и поиска.
- NANO: `ctrl + W` - для поиска, `cntl + \` - для замены.
- JOE: `ctrl + K` and `f` - для поиска, `R` - для замены.

![VIM](screen/screen22.png)
![NANO](screen/screen23.png)
![NANO](screen/screen24.png)
![NANO](screen/screen25.png)
![NANO](screen/screen26.png)
![JOE](screen/screen27.png)
![JOE](screen/screen28.png)
![JOE](screen/screen29.png)
![JOE](screen/screen30.png)


## Part 8. Установка и базовая настройка сервиса **SSHD**
**== Задание ==**
##### Установить службу SSHd. 
- `sudo apt install ssh`
- `sudo apt install openssh-server`

##### Добавить автостарт службы при загрузке системы. 

- `sudo systemctl enable sshd`

##### Перенастроить службу SSHd на порт 2022.  

- Перенастраиваем файл на порт 2022 командой `sudo nano /etc/ssh/sshd_config`

![Порт 2022](screen/screen31.png)

- Перезапускаю службу `sudo systemctl restart sshd.service`

##### Используя команду ps, показать наличие процесса sshd. Для этого к команде нужно подобрать ключи.

- Команда  `ps aux | grep sshd`

![Порт 2022](screen/screen31.png)

> Команда `ps` используется для вывода списка всех процессов, запущенных на системе, и их характеристик, включая идентификатор процесса (PID), процент использования CPU, использование памяти и другие детали.

> `a` - позволяет выводить процессы для всех пользователей, а не только для текущего;
> `u` -  позволяет выводить дополнительную информацию о каждом процессе, включая имя пользователя, запустившего процесс, время запуска и использование ресурсов;
> `x` -  в команде ps означает "вывести процессы, не связанные с терминалом". То есть, при использовании этого флага будут показаны все процессы, запущенные от имени пользователя, в том числе и те, которые не    являются интерактивными
##### Перезагрузить систему.

- Вывод команды `netstat -tan`

![NETSTAT](screen/screen32.png)

- Объяснение ключей:
    - `0.0.0.0` - весь диапазон ip-адресов.
    - `-t` протокол TCP
    - `-a` показать все сокеты(прослушиваемые и нет)
    - `-n` показать числовые представления адресов
    - `Proto` - Протокол, используемый сокетом.
    - `Recv-Q` - Счётчик байт не скопированных программой пользователя из этого сокета.
    - `Send-Q` - Счётчик байтов, не подтверждённых удалённым узлом.
    - `Local Address` - Адрес и номер порта локального конца сокета.
    - `Foreign Address` - Адрес и номер порта удалённого конца сокета.
    - `State` - Состояние сокета.


## Part 9. Установка и использование утилит **top**, **htop**
**== Задание ==**
##### Установить и запустить утилиты top и htop.  

- Запуск утилиты `top`:

![TOP](screen/screen33.png)

- По выводу команды top определить и написать в отчёте:
  - uptime: 3:15
  - количество авторизованных пользователей: 1
  - общую загрузку системы: 0,00, 0,00, 0,00
  - общее количество процессов: 106
  - загрузку cpu: 0.0
  - загрузку памяти: 976.7
  - pid процесса занимающего больше всего памяти: 1571
  - pid процесса, занимающего больше всего процессорного времени: 1

- В отчёт вставить скрин с выводом команды htop:
  - отсортированному по PID, PERCENT_CPU, PERCENT_MEM, TIME
    ![htop](screen/screen34.png "PID")
    ![htop](screen/screen35.png "PERCENT_CPU")
    ![htop](screen/screen36.png "PERCENT_MEM")
    ![htop](screen/screen37.png "TIME")
  - отфильтрованному для процесса sshd
    ![htop](screen/screen_s.png)
  - с процессом syslog, найденным, используя поиск
    ![htop](screen/sys_log.png)
  - с добавленным выводом `ctrl + S` hostname, clock и uptime  
    ![htop](screen/screen_s.png)

## Part 10. Использование утилиты **fdisk**
**== Задание ==**
##### Запустить команду fdisk -l и swapon --show.

- название жесткого диска: `/dev/sda`
- размер: `16 GiB`
- количество секторов: `33554432`
- размер swap: `1.5G`

![fdisk](screen/screen38.png)

## Part 11. Использование утилиты df
**Задание: Запустить команду df.**

- размер раздела: `8408452`
- размер занятого пространства: `4020020`
- размер свободного пространства: `3939716`
- процент использования: `51%`
- единициа измерения: `Килобайт`

**Задание: Запустить команду df -Th.**

- размер раздела: `8.1G`
- размер занятого пространства: `3.9G`
- размер свободного пространства: `3.8G`
- процент использования: `51%`
- тип файловой системы: `ext4`


## Part 12. Использование утилиты **du**
**== Задание ==**
##### Запустить команду du.

![do](screen/duo.png)

##### Вывести размер папок /home, /var, /var/log (в байтах, в человекочитаемом виде)

- `/home`:

![/home](screen/screen41.png)

- `/var`:

![/var](screen/screen42.png)

- `/var/log`:

![/var/log](screen/screen43.png)

##### Вывести размер всего содержимого в /var/log (не общее, а каждого вложенного элемента, используя *)

![/var/log/*](screen/screen44.png)

## Part 13. Установка и использование утилиты **ncdu**
**== Задание ==**
##### Установить утилиту ncdu.

- Установка утилиты `ncdu` командой `sudo apt install ncdu`

##### Вывести размер папок /home, /var, /var/log.

- `/home`:

![/home](screen/screen45.png)

- `/var`:

![/var](screen/screen46.png)

- `/var/log`:

![/var/log](screen/screen47.png)

# Part 14. Работа с системными журналами
**== Задание ==**
##### Написать в отчёте время последней успешной авторизации, имя пользователя и метод входа в систему.
- Просмотр время входа в систему:

![auth.log1](screen/screen50.png)

- Время последнией успешной авторизации: `Apr 15 09:27:51` 
- Пользователь: `student`
- Метод входа в систему: `systemd-logind`
- Перезапускаю службу SSHd командой `sudo systemctl restart sshd.service`

- Перезапуск службы отражен в логах:

![auth.log2](screen/screen51.png)

## Part 15. Использование планировщика заданий **CRON**
**== Задание ==**
##### Используя планировщик заданий, запустите команду uptime через каждые 2 минуты.

- Запуск команды uptime через каждые две минуты командой `crontab -e`:

![uptime](screen/screen52.png)

- Запуск службы в фоном режиме командой `sudo systemctl enable cron`
- Вывод строчек заданного диапозона системных журналов командой `tail /var/log/syslog`:

![CRON](screen/screen54.png)

- Вывод на экран списка текущих заданий для CRON командой `crontab -l`:

![CRON](screen/screen53.png)

##### Удалите все задания из планировщика заданий.

- Удаление заданий из планировщика командой `crontab -r` и последущая проверка удаления командой `crontab -l`:

![REMOVE](screen/screen55.png)


















